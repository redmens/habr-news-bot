"""
Утилиты для работы с текстом
"""


def pluralize(number: int, one: str, few: str, many: str) -> str:
    """
    Склоняет существительное в зависимости от числа
    
    Правила склонения в русском языке:
    - 1, 21, 31, 41, ... - форма "one" (именительный падеж единственного числа)
    - 2-4, 22-24, 32-34, ... - форма "few" (родительный падеж единственного числа)
    - 5-20, 25-30, 35-40, ... - форма "many" (родительный падеж множественного числа)
    
    Args:
        number: число
        one: форма для 1, 21, 31, ... (например, "новость", "хаб")
        few: форма для 2-4, 22-24, ... (например, "новости", "хаба")
        many: форма для 5-20, 25-30, ... (например, "новостей", "хабов")
        
    Returns:
        Строка с правильно склоненным существительным
        
    Examples:
        >>> pluralize(1, "новость", "новости", "новостей")
        "новость"
        >>> pluralize(2, "новость", "новости", "новостей")
        "новости"
        >>> pluralize(5, "новость", "новости", "новостей")
        "новостей"
        >>> pluralize(21, "новость", "новости", "новостей")
        "новость"
    """
    # Получаем последние две цифры числа
    mod10 = number % 10
    mod100 = number % 100
    
    # Специальный случай: 11-14 всегда используют форму "many"
    if 11 <= mod100 <= 14:
        return many
    
    # Для остальных случаев смотрим на последнюю цифру
    if mod10 == 1:
        return one
    elif 2 <= mod10 <= 4:
        return few
    else:
        return many


def format_number_with_noun(number: int, one: str, few: str, many: str) -> str:
    """
    Форматирует число с правильно склоненным существительным
    
    Args:
        number: число
        one: форма для 1, 21, 31, ...
        few: форма для 2-4, 22-24, ...
        many: форма для 5-20, 25-30, ...
        
    Returns:
        Строка вида "N существительное" с правильным склонением
        
    Examples:
        >>> format_number_with_noun(1, "новость", "новости", "новостей")
        "1 новость"
        >>> format_number_with_noun(2, "новость", "новости", "новостей")
        "2 новости"
        >>> format_number_with_noun(5, "новость", "новости", "новостей")
        "5 новостей"
    """
    noun = pluralize(number, one, few, many)
    return f"{number} {noun}"

